(this["webpackJsonpvisual-support"]=this["webpackJsonpvisual-support"]||[]).push([[0],{10:function(e,t,a){e.exports={partnerVideo:"styles_partnerVideo__eWc_w",userVideo:"styles_userVideo__2YC4-",errorMessage:"styles_errorMessage__2zmj9",successMessage:"styles_successMessage__2Vigv",textSuccess:"styles_textSuccess__VVxs2",videoDiv:"styles_videoDiv__dB80l",leftSidebar:"styles_leftSidebar__2duKN",calling:"styles_calling__11arM",isCalling:"styles_isCalling__3sxc3",callerText:"styles_callerText__12l-N",callAccept:"styles_callAccept__3SHFf",row:"styles_row__2TM8m",image:"styles_image__3lm_T",col:"styles_col__1wYbl",colform:"styles_colform__fWhwM",form:"styles_form__2rtl2",inputphoneon:"styles_inputphoneon__sssKe",inputemailon:"styles_inputemailon__871Ai",inputnameon:"styles_inputnameon__3KTLJ",inputphoneoff:"styles_inputphoneoff__mVtwB",inputemailoff:"styles_inputemailoff__2kh0m",inputnameoff:"styles_inputnameoff__28A7M",buttonsignup:"styles_buttonsignup__1YC6f",logo:"styles_logo__3ot-y",loader:"styles_loader__2Dyyj",callBox:"styles_callBox__2jcQU",callerImg:"styles_callerImg__2lsQL",divOff:"styles_divOff__3Gdqe",header:"styles_header__3q8Zo",welcome:"styles_welcome__V3dX5",buttonlogin:"styles_buttonlogin__1Svnq",faicons:"styles_faicons__2s4Dh",callButton:"styles_callButton__1b9Su",facall:"styles_facall__19LTD",faBox:"styles_faBox__36J9C",faMenu:"styles_faMenu__1UoWA",errorIcon:"styles_errorIcon__3Y8wn",labelstyleon:"styles_labelstyleon__FjinH",labelstyleoff:"styles_labelstyleoff__1pR2Z",info:"styles_info__2lAPb",forminput:"styles_forminput__3lgyK",videoCol:"styles_videoCol__3lOLH",video:"styles_video__3aV8E",leftSidebarOff:"styles_leftSidebarOff__1dFLV",menuToggle:"styles_menuToggle__1P-Fg",menuToggleOff:"styles_menuToggleOff__2HV8A"}},1421:function(e,t){},1427:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),s=a(32),o=a.n(s),r=a(643),c=a(35),i=a(94),m=a(95),u=a(98),d=a(97),h=a(157),g=a(160),f=a(66),p=a(53),v=a(54),E=(a(375),a(10)),b=a.n(E),_=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).continue=function(e){e.preventDefault(),n.props.nextStep()},n.previous=function(e){e.preventDefault(),n.props.prevStep()},n.state={message:{name:"",email:"",phone:""},created:!1,submitting:!1,signupMessage:"",error:!1},n.onHandleChange=n.onHandleChange.bind(Object(f.a)(n)),n.signUp=n.signUp.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"onHandleChange",value:function(e){var t=e.target.getAttribute("name");this.setState({message:Object(g.a)(Object(g.a)({},this.state.message),{},Object(h.a)({},t,e.target.value))})}},{key:"signUp",value:function(e){var t=this;e.preventDefault(),this.setState({submitting:!0}),fetch("/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.message)}).then((function(e){return e.json()})).then((function(e){e.success?t.setState({error:!1,submitting:!1,created:!0,signupMessage:e.message,message:{name:"",email:"",phone:""}}):t.setState({error:!0,created:!1,submitting:!1,signupMessage:e.message})}))}},{key:"render",value:function(){var e=this;this.state.created&&setTimeout((function(){e.props.nextStep()}),3e3);this.props.step;return l.a.createElement("div",{className:b.a.main},l.a.createElement("div",{className:this.state.submitting?b.a.loader:b.a.divOff}),l.a.createElement("div",{className:b.a.row},l.a.createElement("div",{className:b.a.col},l.a.createElement("img",{className:b.a.image,src:"col-bg.webp",width:"100%",height:"100%"})),l.a.createElement("div",{className:b.a.colform},l.a.createElement("h2",{style:{textAlign:"left"}},"Welcome to VisualSupport!"),l.a.createElement("div",{className:b.a.form},l.a.createElement("form",{className:this.state.error?"error sms-form":"sms-form"},l.a.createElement("div",null,l.a.createElement("div",{className:b.a.forminput},l.a.createElement("label",{className:this.state.message.name.length>=5?b.a.labelstyleoff:b.a.labelstyleon},"Your name: "),l.a.createElement(p.a,{icon:v.h,className:b.a.faicons,color:this.state.message.name.length>=5?"gray":"#5c5CA1",size:"lg"}),l.a.createElement("input",{className:this.state.message.name.length>=5?b.a.inputnameoff:b.a.inputnameon,type:"text",name:"name",id:"name",value:this.state.message.name,onChange:this.onHandleChange}))),l.a.createElement("div",null,l.a.createElement("div",{className:b.a.forminput},l.a.createElement("label",{className:this.state.message.email.length>=6?b.a.labelstyleoff:b.a.labelstyleon},"Email address:"),l.a.createElement(p.a,{icon:v.c,className:b.a.faicons,color:this.state.message.email.length>=6?"gray":"#5c5CA1",size:"lg"}),l.a.createElement("input",{className:this.state.message.email.length>=6?b.a.inputemailoff:b.a.inputemailon,type:"email",name:"email",id:"email",value:this.state.message.email,onChange:this.onHandleChange}))),l.a.createElement("div",null,l.a.createElement("div",{className:b.a.forminput},l.a.createElement("label",{htmlFor:"to",className:this.state.message.phone.length>=10?b.a.labelstyleoff:b.a.labelstyleon},"Phone:"),l.a.createElement(p.a,{icon:v.f,className:b.a.faicons,transform:{rotate:90},color:this.state.message.phone.length>=10?"gray":"#5c5CA1",size:"lg"}),l.a.createElement("input",{className:this.state.message.phone.length>=10?b.a.inputphoneoff:b.a.inputphoneon,type:"tel",name:"phone",id:"phone",value:this.state.message.phone,onChange:this.onHandleChange}))))),l.a.createElement("div",{className:this.state.error?b.a.errorMessage:b.a.divOff},this.state.error?l.a.createElement(p.a,{icon:v.d,className:b.a.errorIcon,color:"white",size:"xs"}):null," ",l.a.createElement("span",{className:b.a.textSuccess},this.state.signupMessage?this.state.signupMessage:null)),l.a.createElement("div",{className:this.state.created?b.a.successMessage:b.a.divOff},this.state.created?l.a.createElement(p.a,{icon:v.b,className:b.a.errorIcon,color:"white",size:"xs"}):null," ",l.a.createElement("span",{className:b.a.textSuccess},this.state.signupMessage?this.state.signupMessage:null)),l.a.createElement("button",{onClick:this.signUp,disabled:this.state.submitting,className:b.a.buttonsignup},"Sign Up Now"),"or",l.a.createElement("button",{onClick:this.continue,className:b.a.buttonlogin},"Login"))))}}]),a}(n.Component),y=a(68),C=a(252),k=a(1467),S=a(1468),N=a(1471),x=a(199),w=a.n(x),O=a(1469),T=a(1463),j=a(1465),U=a(1474),M=a(1475),D=a(1473),B=a(1476),V=a(1472),P=a(1470),A=a(644),R=a(1466),W=a(630),I=a.n(W),z=a(632),L=a.n(z),F=a(633),H=a.n(F),Y=a(636),X=a.n(Y),J=a(634),G=a.n(J),K=a(629),q=a.n(K),Z=a(639),Q=a.n(Z),$=a(640),ee=a.n($),te=a(641),ae=a.n(te),ne=a(635),le=a.n(ne),se=a(637),oe=a.n(se),re=a(638),ce=a.n(re),ie=a(627),me=a.n(ie),ue=(a(1428),a(631)),de=a.n(ue),he=a(198),ge=a.n(he),fe={root:{padding:"3px",display:"flex",flexWrap:"wrap",margin:"10px 10px 5px 10px",justifyContent:"space-around"},gridList:{width:"100%",overflowY:"auto",marginBottom:"24px"},gridTile:{backgroundColor:"#fcfcfc"},appBar:{backgroundColor:"#333"},radioButton:{marginTop:"3px",marginBottom:"3px"},separator:{height:"42px",backgroundColor:"white"},iconButton:{fill:"white",width:"42px",height:"42px"},dropArea:{width:"100%",height:"64px",border:"2px dashed rgb(102, 102, 102)",borderStyle:"dashed",borderRadius:"5px",textAlign:"center",paddingTop:"20px"},activeStyle:{borderStyle:"solid",backgroundColor:"#eee"},rejectStyle:{borderStyle:"solid",backgroundColor:"#ffdddd"},card:{margin:"10px 10px 5px 0",width:"200px"}};var pe=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).continue=function(e){e.preventDefault(),n.props.nextStep()},n._selectTool=function(e){n.setState({tool:e.target.value,enableRemoveSelected:e.target.value==y.Tools.Select,enableCopyPaste:e.target.value==y.Tools.Select})},n._save=function(){var e=n.state.drawings;e.push(n._sketch.toDataURL()),n.setState({drawings:e})},n._download=function(){console.save(n._sketch.toDataURL(),"toDataURL.txt"),console.save(JSON.stringify(n._sketch.toJSON()),"toDataJSON.txt");var e=n.refs.imgDown,t=new Event("click",{});e.href=n._sketch.toDataURL(),e.download="toPNG.png",e.dispatchEvent(t)},n._renderTile=function(e,t){return l.a.createElement(T.a,{key:t,title:"Canvas Image",actionPosition:"left",titlePosition:"top",titleBackground:"linear-gradient(to bottom, rgba(0,0,0,0.7) 0%,rgba(0,0,0,0.3) 70%,rgba(0,0,0,0) 100%)",cols:1,rows:1,style:fe.gridTile,actionIcon:l.a.createElement(j.a,{onTouchTap:function(e){return n._removeMe(t)}},l.a.createElement(q.a,{color:"white"}))},l.a.createElement("img",{src:e}))},n._removeMe=function(e){var t=n.state.drawings;t.splice(e,1),n.setState({drawings:t})},n._undo=function(){n._sketch.undo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n._redo=function(){n._sketch.redo(),n.setState({canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n._clear=function(){n._sketch.clear(),n._sketch.setBackgroundFromDataUrl(""),n.setState({controlledValue:null,backgroundColor:"transparent",fillWithBackgroundColor:!1,canUndo:n._sketch.canUndo(),canRedo:n._sketch.canRedo()})},n._removeSelected=function(){n._sketch.removeSelected()},n._onSketchChange=function(){var e=n.state.canUndo,t=n._sketch.canUndo();e!==t&&n.setState({canUndo:t})},n._onBackgroundImageDrop=function(e){if(e&&e.length>0){var t=n._sketch,a=new FileReader,l=n.state,s=l.stretched,o=l.stretchedX,r=l.stretchedY,c=l.originX,i=l.originY;a.addEventListener("load",(function(){return t.setBackgroundFromDataUrl(a.result,{stretched:s,stretchedX:o,stretchedY:r,originX:c,originY:i})}),!1),a.readAsDataURL(e[0])}},n._addText=function(){return n._sketch.addText(n.state.text)},n.videoRef=l.a.createRef(),n.state={lineWidth:10,lineColor:"black",fillColor:"#68CCCA",backgroundColor:"transparent",shadowWidth:0,shadowOffset:0,tool:y.Tools.Pencil,enableRemoveSelected:!1,fillWithColor:!1,fillWithBackgroundColor:!1,drawings:[],canUndo:!1,canRedo:!1,controlledSize:!1,sketchWidth:600,sketchHeight:600,stretched:!0,stretchedX:!1,stretchedY:!1,originX:"left",originY:"top",imageUrl:"https://files.gamebanana.com/img/ico/sprays/4ea2f4dad8d6f.png",expandTools:!1,expandControls:!1,expandColors:!1,expandBack:!1,expandImages:!1,expandControlled:!1,text:"a text, cool!",enableCopyPaste:!1},n}return Object(m.a)(a,[{key:"componentDidMount",value:function(){var e=this;if(navigator.mediaDevices.getUserMedia||navigator.mediaDevices.webkitGetUserMedia)navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"environment",width:{min:640,ideal:1920,max:1920},height:{min:400,ideal:1080}}}).then((function(t){return window.stream=t,e.videoRef.current.srcObject=t,new Promise((function(t){e.videoRef.current.onloadedmetadata=function(){t()}}))}),(function(e){console.log("Could not start the web cam!"),console.error(e)}));!function(e){e.save=function(t,a){if(t){a||(a="console.json"),"object"===typeof t&&(t=JSON.stringify(t,void 0,4));var n=new Blob([t],{type:"text/json"}),l=document.createEvent("MouseEvents"),s=document.createElement("a");s.download=a,s.href=window.URL.createObjectURL(n),s.dataset.downloadurl=["text/json",s.download,s.href].join(":"),l.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(l)}else e.error("Console.save: No data")}}(console)}},{key:"render",value:function(){var e=this,t=(this.props.step,this.state.controlledValue),a=Object(A.a)({typography:{useNextVariants:!0},palette:{primary:{main:I.a[500]},secondary:{main:"#11cb5f"}}});return l.a.createElement(R.a,{theme:a},l.a.createElement("div",{className:fe.row},l.a.createElement("div",{className:"col-xs-12 col-sm-12 col-md-12 col-lg-12"},l.a.createElement(k.a,{title:"Visual Support",position:"static",style:fe.appBar},l.a.createElement(de.a,null,l.a.createElement(ge.a,{variant:"h6",color:"inherit",style:{flexGrow:1}},"Visual Support"),l.a.createElement(j.a,{color:"primary",disabled:!this.state.canUndo,onClick:this._undo},l.a.createElement(L.a,null)),l.a.createElement(j.a,{color:"primary",disabled:!this.state.canRedo,onClick:this._redo},l.a.createElement(H.a,null)),l.a.createElement(j.a,{color:"primary",onClick:this._save},l.a.createElement(G.a,null)),l.a.createElement(j.a,{color:"primary",onClick:this._download},l.a.createElement(le.a,null)),l.a.createElement(j.a,{color:"primary",onClick:this._clear},l.a.createElement(X.a,null)))))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-9 col-lg-9",style:{width:"100%"}},l.a.createElement(y.SketchField,{name:"sketch",className:"canvas-area",ref:function(t){return e._sketch=t},lineColor:this.state.lineColor,lineWidth:this.state.lineWidth,fillColor:this.state.fillWithColor?this.state.fillColor:"transparent",backgroundColor:this.state.fillWithBackgroundColor?this.state.backgroundColor:"transparent",width:this.state.controlledSize?this.state.sketchWidth:null,height:this.state.controlledSize?this.state.sketchHeight:null,defaultValue:me.a,value:t,forceValue:!0,onChange:this._onSketchChange,tool:this.state.tool}),l.a.createElement("video",{className:b.a.video,autoPlay:!0,muted:!0,ref:this.videoRef})),l.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-3 col-lg-3",style:{width:"auto",display:"block",position:"absolute",top:"85px",right:"0"}},l.a.createElement(S.a,{style:fe.card},l.a.createElement(O.a,{title:"Tools",subheader:"Available tools",action:l.a.createElement(j.a,{onClick:function(t){return e.setState({expandTools:!e.state.expandTools})}},l.a.createElement(w.a,null))}),l.a.createElement(P.a,{in:this.state.expandTools},l.a.createElement(N.a,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(D.a,{select:!0,label:"Canvas Tool",value:this.state.tool,onChange:this._selectTool,helperText:"Please select Canvas Tool"},l.a.createElement(U.a,{value:y.Tools.Select,key:"Select"},"Select"),l.a.createElement(U.a,{value:y.Tools.Pencil,key:"Pencil"},"Pencil"),l.a.createElement(U.a,{value:y.Tools.Line,key:"Line"},"Line"),l.a.createElement(U.a,{value:y.Tools.Arrow,key:"Arrow"},"Arrow"),l.a.createElement(U.a,{value:y.Tools.Rectangle,key:"Rectangle"},"Rectangle"),l.a.createElement(U.a,{value:y.Tools.Circle,key:"Circle"},"Circle"),l.a.createElement(U.a,{value:y.Tools.Pan,key:"Pan"},"Pan"),l.a.createElement(U.a,{value:y.Tools.RectangleLabel,key:"Pan"},"RectangleLabel")))),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(ge.a,{id:"slider"},"Line Weight"),l.a.createElement(M.a,{step:1,min:0,max:100,"aria-labelledby":"slider",value:this.state.lineWidth,onChange:function(t,a){return e.setState({lineWidth:a})}}),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"zoom"},"Zoom"),l.a.createElement("div",null,l.a.createElement(j.a,{onClick:function(t){return e._sketch.zoom(1.25)}},l.a.createElement(oe.a,null)),l.a.createElement(j.a,{onClick:function(t){return e._sketch.zoom(.8)}},l.a.createElement(ce.a,null))),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-7"},l.a.createElement(D.a,{label:"Text",helperText:"Add text to Sketch",onChange:function(t){return e.setState({text:t.target.value})},value:this.state.text})),l.a.createElement("div",{className:"col-lg-3"},l.a.createElement(j.a,{color:"primary",onClick:this._addText},l.a.createElement(Q.a,null))))))),l.a.createElement(S.a,{style:fe.card},l.a.createElement(O.a,{title:"Controls",subheader:"Copy/Paste etc.",action:l.a.createElement(j.a,{onClick:function(t){return e.setState({expandControls:!e.state.expandControls})}},l.a.createElement(w.a,null))}),l.a.createElement(P.a,{in:this.state.expandControls},l.a.createElement(N.a,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-lg-12"},l.a.createElement(V.a,{control:l.a.createElement(B.a,{value:this.state.controlledSize,onChange:function(t){return e.setState({controlledSize:!e.state.controlledSize})}}),label:"Control size"}),l.a.createElement("br",null),l.a.createElement(ge.a,{id:"xSize"},"Change Canvas Width"),l.a.createElement(M.a,{step:1,min:10,max:1e3,value:this.state.sketchWidth,onChange:function(t,a){return e.setState({sketchWidth:a})}}),l.a.createElement("br",null),l.a.createElement(ge.a,{id:"ySize"},"Change Canvas Height"),l.a.createElement(M.a,{step:1,min:10,max:1e3,value:this.state.sketchHeight,onChange:function(t,a){return e.setState({sketchHeight:a})}}),l.a.createElement("br",null))),l.a.createElement("label",{htmlFor:"zoom"},"Selection Actions (Select an object first!)"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col"},l.a.createElement(j.a,{color:"primary",disabled:!this.state.enableCopyPaste,onClick:function(t){e._sketch.copy(),e._sketch.paste()}},l.a.createElement(ee.a,null))),l.a.createElement("div",{className:"col"},l.a.createElement(j.a,{color:"primary",disabled:!this.state.enableRemoveSelected,onClick:this._removeSelected},l.a.createElement(ae.a,null))))))),l.a.createElement(S.a,{style:fe.card},l.a.createElement(O.a,{title:"Colors",subheader:"Put some color on your drawing",action:l.a.createElement(j.a,{onClick:function(t){return e.setState({expandColors:!e.state.expandColors})}},l.a.createElement(w.a,null))}),l.a.createElement(P.a,{in:this.state.expandColors},l.a.createElement(N.a,null,l.a.createElement("label",{htmlFor:"lineColor"},"Line"),l.a.createElement("br",null),l.a.createElement(C.CompactPicker,{id:"lineColor",color:this.state.lineColor,onChange:function(t){return e.setState({lineColor:t.hex})}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement(V.a,{control:l.a.createElement(B.a,{value:this.state.fillWithColor,onChange:function(t){return e.setState({fillWithColor:!e.state.fillWithColor})}}),label:"Fill"}),l.a.createElement(C.CompactPicker,{color:this.state.fillColor,onChange:function(t){return e.setState({fillColor:t.hex})}})))),l.a.createElement(S.a,{style:fe.card},l.a.createElement(O.a,{title:"Background",subheader:"Background of drawing",action:l.a.createElement(j.a,{onClick:function(t){return e.setState({expandBack:!e.state.expandBack})}},l.a.createElement(w.a,null))}),l.a.createElement(P.a,{in:this.state.expandBack},l.a.createElement(N.a,null,l.a.createElement(V.a,{label:"Background Color",control:l.a.createElement(B.a,{value:this.state.fillWithBackgroundColor,onChange:function(t){return e.setState({fillWithBackgroundColor:!e.state.fillWithBackgroundColor})}})}),l.a.createElement(C.CompactPicker,{color:this.state.backgroundColor,onChange:function(t){return e.setState({backgroundColor:t.hex})}}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("label",{htmlFor:"lineColor"},"Set Image Background"),l.a.createElement("br",null),l.a.createElement(V.a,{label:"Fit canvas (X,Y)",control:l.a.createElement(B.a,{value:this.state.stretched,onChange:function(t){return e.setState({stretched:!e.state.stretched})}})}),l.a.createElement(V.a,{label:"Fit canvas (X)",control:l.a.createElement(B.a,{value:this.state.stretchedX,onChange:function(t){return e.setState({stretchedX:!e.state.stretchedX})}})}),l.a.createElement(V.a,{label:"Fit canvas (Y)",control:l.a.createElement(B.a,{value:this.state.stretchedY,onChange:function(t){return e.setState({stretchedY:!e.state.stretchedY})}})})))))),l.a.createElement("div",null,l.a.createElement("div",{className:"col-xs-7 col-sm-7 col-md-9 col-lg-9"},l.a.createElement("div",{className:"col-xs-5 col-sm-5 col-md-3 col-lg-3"},l.a.createElement("button",{className:"next-button",onClick:this.continue},"Continue")))))}}]),a}(l.a.Component),ve=a(642),Ee=a.n(ve),be=a(361),_e=a.n(be),ye=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).userVideo=l.a.createRef(),n.partnerVideo=l.a.createRef(),n.socket=l.a.createRef(),n.callPeer=function(e){var t=new _e.a({initiator:!0,trickle:!1,objectMode:!0,config:{iceServers:[{urls:"stun:stun.l.google.com:19302",username:"edmir.h@gmail.com",credential:"98376683"},{url:"turn:turn.bistri.com:80",credential:"homeo",username:"homeo"}]},stream:n.state.stream});t.on("signal",(function(t){n.socket.current.emit("callUser",{userToCall:e,signalData:t,from:n.state.yourID,name:n.state.name})})),t.on("stream",(function(e){n.partnerVideo.current?n.partnerVideo.current.srcObject=e:n.partnerVideo.current.srcObject=null})),t.write("P2P Data Channel"),n.socket.current.on("callAccepted",(function(e){n.setState({callAccepted:!0}),t.signal(e)}))},n.acceptCall=function(){n.setState({callAccepted:!0,receivingCall:!1});var e=new _e.a({initiator:!1,objectMode:!0,trickle:!1,stream:n.state.stream});e.on("signal",(function(e){n.socket.current.emit("acceptCall",{signal:e,to:n.state.caller})})),e.on("stream",(function(e){n.partnerVideo.current?n.partnerVideo.current.srcObject=e:n.partnerVideo.current.srcObject=null})),e.on("data",(function(e){console.log("Data: ",e)})),e.signal(n.state.callerSignal)},n.state={yourID:"",ID:{},users:{},stream:{},streaming:!1,receivingCall:!1,caller:"",callerName:"",callerSignal:{},callAccepted:!1,calling:!0,isToggled:!0,getUser:{email:n.props.email},name:""},n.getCurrentUser=n.getCurrentUser.bind(Object(f.a)(n)),n.toggleMenu=n.toggleMenu.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"componentWillUpdate",value:function(){var e=this;this.socket.current.on("allUsers",(function(t){e.setState({users:t})}))}},{key:"toggleMenu",value:function(e,t){e.preventDefault(),console.log("Toggled",t),this.setState({isToggled:t})}},{key:"componentDidMount",value:function(){var e=this;this.socket.current=Ee.a.connect("https://liveme.dev.digitalfortress.dev/"),this.getCurrentUser(),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.userVideo.current?e.userVideo.current.srcObject=t:e.userVideo.current.srcObject=null,e.setState({stream:t,streaming:!0})})),this.socket.current.on("yourID",(function(t){e.setState({yourID:t,ID:t},(function(){return console.log("Your id: ",e.state.yourID)}))})),this.socket.current.on("allUsers",(function(t){e.setState({users:t})})),this.socket.current.on("hey",(function(t){e.setState({caller:t.from,callerSignal:t.signal,callerName:t.name})}))}},{key:"getCurrentUser",value:function(){var e=this;this.setState({submitting:!0}),fetch("/auth/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.getUser)}).then((function(e){return e.json()})).then((function(t){t.success?(e.socket.current.emit("getName",t.name),e.setState({name:t.name})):console.log(t.message)}))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.users).map((function(t){return console.log("Users: ",e.state.users[t]),t===e.state.yourID?null:l.a.createElement("div",{style:{marginTop:"10px"}},l.a.createElement("span",{style:{fontWeight:"bold"}},e.state.users[t])," ",l.a.createElement("button",{className:b.a.callButton,onClick:function(){return e.callPeer(t)}}," ",l.a.createElement(p.a,{icon:v.f,className:b.a.facall,transform:{rotate:90},color:"green",size:"lg"})," "))}));return l.a.createElement("div",{style:{overflow:"hidden"}},l.a.createElement("div",{className:b.a.header},l.a.createElement("img",{src:"logo.png",width:"70",height:"45",className:b.a.logo}),l.a.createElement("button",{className:this.state.isToggled?b.a.divOff:b.a.menuToggle,onClick:function(t){return e.toggleMenu(t,!0)}},l.a.createElement(p.a,{icon:v.a,className:b.a.faMenu,color:"black",size:"sm"}))),l.a.createElement("div",{className:b.a.videoDiv},l.a.createElement("div",{className:b.a.videoCol},l.a.createElement("video",{className:b.a.partnerVideo,autoPlay:!0,unmuted:!0,ref:this.partnerVideo,width:"800",height:"700"})),l.a.createElement("div",{className:b.a.partnerDiv},l.a.createElement("video",{className:b.a.userVideo,autoPlay:!0,muted:!0,ref:this.userVideo,width:"400",height:"300"}))),l.a.createElement("div",{className:this.state.isToggled?b.a.leftSidebar:b.a.leftSiderbarOff},l.a.createElement("button",{className:this.state.isToggled?b.a.menuToggleOff:b.a.divOff,onClick:function(t){return e.toggleMenu(t,!1)}},l.a.createElement(p.a,{icon:v.g,className:b.a.faMenu,color:"black",size:"sm"})),l.a.createElement("div",{className:this.state.isToggled?b.a.calling:b.a.divOff},l.a.createElement("h3",{className:this.state.isToggled?"":b.a.divOff},"Incoming calls:"),l.a.createElement("p",{className:this.state.isToggled?b.a.isCalling:b.a.divOff},this.state.callerName?this.state.callerName+" is calling you":"No incomning calls"),this.state.caller?l.a.createElement("button",{className:this.state.isToggled?"":b.a.divOff,onClick:function(t){return e.acceptCall(t)}},"Accept"):null),l.a.createElement("div",{className:this.state.isToggled?b.a.info:b.a.divOff},l.a.createElement("h3",{className:this.state.isToggled?"":b.a.divOff},"Available users:"),l.a.createElement("span",{className:this.state.isToggled?"":b.a.divOff},t))),l.a.createElement("div",{className:this.state.receivingCall?b.a.callBox:b.a.divOff},l.a.createElement("img",{className:b.a.callerImg,src:"user.png",width:"102",height:"110"}),l.a.createElement("p",{className:b.a.callerText},this.state.callerName?this.state.callerName+" is calling you":null),this.state.caller?l.a.createElement("button",{className:b.a.callAccept,onClick:function(){return e.acceptCall()}},l.a.createElement(p.a,{icon:v.f,className:b.a.faBox,transform:{rotate:90},color:"green",size:"lg"})):null))}}]),a}(l.a.Component),Ce=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).continue=function(e){e.preventDefault(),n.props.nextStep()},n.previous=function(e){e.preventDefault(),n.props.prevStep()},n.state={message:{email:"",password:""},loginMessage:"",loggedin:!1,submitting:!1,error:!1},n.onHandleChange=n.onHandleChange.bind(Object(f.a)(n)),n.login=n.login.bind(Object(f.a)(n)),n.loggedIn=n.loggedIn.bind(Object(f.a)(n)),n.sendUser=n.sendUser.bind(Object(f.a)(n)),n}return Object(m.a)(a,[{key:"loggedIn",value:function(){this.props.nextStep(),this.sendUser()}},{key:"sendUser",value:function(){this.props.getUser(this.state.message.email)}},{key:"onHandleChange",value:function(e){var t=e.target.getAttribute("name");this.setState({message:Object(g.a)(Object(g.a)({},this.state.message),{},Object(h.a)({},t,e.target.value))})}},{key:"login",value:function(e){var t=this;e.preventDefault(),this.setState({submitting:!0}),fetch("/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.state.message)}).then((function(e){return e.json()})).then((function(e){e.success?t.setState({error:!1,loginMessage:e.message},(function(){return t.loggedIn()})):t.setState({error:!0,loginMessage:e.message,submitting:!1})}))}},{key:"render",value:function(){this.props.step;return l.a.createElement("div",{className:b.a.main},l.a.createElement("div",{className:this.state.submitting?b.a.loader:b.a.divOff}),l.a.createElement("div",{className:b.a.row},l.a.createElement("div",{className:b.a.col},l.a.createElement("img",{className:b.a.image,src:"col-bg.webp",width:"100%",height:"100%"})),l.a.createElement("div",{className:b.a.colform},l.a.createElement("h2",{style:{textAlign:"left"}},"Welcome to VisualSupport!"),l.a.createElement("div",{className:b.a.form},l.a.createElement("form",{className:this.state.error?"error sms-form":"sms-form"},l.a.createElement("div",null,l.a.createElement("div",{className:b.a.forminput},l.a.createElement("label",{className:this.state.message.email.length>=6?b.a.labelstyleoff:b.a.labelstyleon},"Email address:"),l.a.createElement(p.a,{icon:v.c,className:b.a.faicons,color:this.state.message.email.length>=6?"gray":"#5c5CA1",size:"lg"}),l.a.createElement("input",{className:this.state.message.email.length>=6?b.a.inputemailoff:b.a.inputemailon,type:"email",name:"email",id:"email",value:this.state.message.email,onChange:this.onHandleChange}))),l.a.createElement("div",null,l.a.createElement("div",{className:b.a.forminput},l.a.createElement("label",{htmlFor:"to",className:this.state.message.password.length>=6?b.a.labelstyleoff:b.a.labelstyleon},"Password:"),l.a.createElement(p.a,{icon:v.e,className:b.a.faicons,transform:{rotate:90},color:this.state.message.password.length>=6?"gray":"#5c5CA1",size:"lg"}),l.a.createElement("input",{className:this.state.message.password.length>=6?b.a.inputphoneoff:b.a.inputphoneon,type:"password",name:"password",id:"password",value:this.state.message.password,onChange:this.onHandleChange}))))),l.a.createElement("div",{className:this.state.error?b.a.errorMessage:b.a.divOff},this.state.error?l.a.createElement(p.a,{icon:v.d,className:b.a.errorIcon,color:"white",size:"xs"}):null," ",l.a.createElement("span",{className:b.a.textSuccess},this.state.loginMessage?this.state.loginMessage:null)),l.a.createElement("div",{className:this.state.loggedin?b.a.successMessage:b.a.divOff},this.state.loggedin?l.a.createElement(p.a,{icon:v.b,className:b.a.errorIcon,color:"white",size:"xs"}):null," ",l.a.createElement("span",{className:b.a.textSuccess},this.state.loginMessage?this.state.loginMessage:null)),l.a.createElement("button",{onClick:this.login,disabled:this.state.submitting,className:b.a.buttonsignup},"Login Now"),"or",l.a.createElement("button",{onClick:this.previous,className:b.a.buttonlogin},"Sign Up"))))}}]),a}(n.Component),ke=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={step:1,email:""},e.nextStep=function(){var t=e.state.step;e.setState({step:t+1,email:""})},e.prevStep=function(){var t=e.state.step;e.setState({step:t-1})},e.getUser=function(t){e.setState({email:t})},e}return Object(m.a)(a,[{key:"render",value:function(){switch(this.state.step){case 1:return l.a.createElement(_,{nextStep:this.nextStep});case 2:return l.a.createElement(Ce,{nextStep:this.nextStep,prevStep:this.prevStep,getUser:this.getUser});case 3:return l.a.createElement(ye,{nextStep:this.nextStep,email:this.state.email});case 4:return l.a.createElement(pe,{nextStep:this.nextStep})}}}]),a}(n.Component),Se=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(r.a,null,l.a.createElement(c.a,{exact:!0,path:"/",component:ke}),l.a.createElement(c.a,{path:"/client",component:ye})))},Ne=document.getElementById("root");o.a.render(l.a.createElement(Se,null),Ne)},375:function(e,t,a){},627:function(e,t){},654:function(e,t,a){e.exports=a(1427)},704:function(e,t){},706:function(e,t){},716:function(e,t){},718:function(e,t){},743:function(e,t){},745:function(e,t){},746:function(e,t){},752:function(e,t){},754:function(e,t){},772:function(e,t){},775:function(e,t){},791:function(e,t){},794:function(e,t){},799:function(e,t){},801:function(e,t){},824:function(e,t){},930:function(e,t){},931:function(e,t){},964:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=964},996:function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=996}},[[654,1,2]]]);